# AI研发辅助平台 - 产品需求确认文档

## 📋 文档说明

**文档目的**: 基于前后端接口一致性分析，确认最终产品需求和实施优先级  
**创建时间**: 2024-12-14  
**状态**: 待用户标注确认  

> **请在每个功能模块后标注：**
> - ✅ **必须实现** - 核心功能，必须在第一阶段完成
> - 🟡 **重要功能** - 重要功能，第二阶段实现
> - 🟠 **可选功能** - 可选功能，第三阶段或后续版本实现
> - ❌ **暂不实现** - 当前版本不实现

## 🎯 产品核心定位

**产品名称**: AI研发辅助平台  
**核心价值**: 基于大模型的智能化研发工具，提升软件开发全流程效率  
**目标用户**: 软件开发工程师、测试工程师、产品经理  

## 🏗️ 系统架构确认

### 前端技术栈
- **框架**: Vue 3 + TypeScript + Element Plus
- **状态管理**: Pinia
- **路由**: Vue Router
- **构建工具**: Vite
- **HTTP客户端**: Axios

### 后端技术栈  
- **框架**: FastAPI + Python
- **数据库**: SQLite (开发) / MySQL (生产)
- **ORM**: SQLModel
- **认证**: JWT Token
- **任务队列**: Celery (可选)

**请确认**: 以上技术栈是否符合要求？ [ 基本符合，不使用mysql]

## 🔐 用户认证模块

### 功能清单
1. **用户登录** - 支持用户名/密码登录
2. **用户注册** - 新用户注册功能
3. **Token刷新** - JWT Token自动刷新
4. **用户登出** - 安全登出功能
5. **密码修改** - 用户密码修改
6. **用户信息管理** - 个人信息维护

### 技术细节
- **认证方式**: JWT Bearer Token
- **登录格式**: Form-data (application/x-www-form-urlencoded)---【json格式，简便即可】
- **Token有效期**: 30分钟 (可配置)
- **权限控制**: 基于角色的访问控制

**用户标注**: [P1] 请在此标注优先级

## 👤 用户管理模块

### 功能清单--[接口名称可以编辑为更易读的]
1. **获取用户信息** - GET /users/me
2. **更新用户信息** - PUT /users/me  
3. **用户偏好设置** - 主题、语言等个性化配置
4. **头像管理** - 用户头像上传和更新
5. **用户统计** - 登录次数、最后登录时间等

### 数据模型 --- 【数据模型先考虑必要的，不必要的不设置】
```typescript
interface UserInfo {
  id: string
  username: string
  email: string
  full_name?: string
  avatar_url?: string
  bio?: string
  preferences?: object
  is_active: boolean
  is_verified: boolean
  login_count: number
  last_login_at?: string
}
```

**用户标注**: [ P2] 请在此标注优先级

## 🤖 AI模型配置模块

### 功能清单
1. **模型配置管理** - 创建、编辑、删除AI模型配置
2. **多服务商支持**:
   - OpenAI (GPT-4o, GPT-4o-mini, GPT-3.5-turbo)
   - DeepSeek (deepseek-chat, deepseek-coder)
   - 讯飞星火 (generalv3.5, generalv3)
   - 字节豆包 (自定义端点)
   - Google Gemini (gemini-pro, gemini-pro-vision)
   - Anthropic Claude (claude-3-5-sonnet, claude-3-haiku)
3. **连接测试** - 验证模型配置和连接状态
4. **默认模型设置** - 设置系统默认使用的AI模型
5. **参数配置** - 温度、最大Token数等参数设置

**用户标注**: [P4 ] 请在此标注优先级

## 💬 AI对话模块

### 功能清单
1. **对话管理** - 创建、删除、重命名对话
2. **消息发送** - 支持文本消息发送
3. **流式响应** - 实时显示AI回复 (可选)
4. **模型切换** - 对话中切换不同AI模型
5. **对话历史** - 保存和查看历史对话
6. **对话导出** - 导出对话内容

**用户标注**: [ P4] 请在此标注优先级

## 📝 Prompt模板模块

### 功能清单
1. **模板管理** - 创建、编辑、删除Prompt模板
2. **模板分类** - 需求分析、代码评审、测试用例、通用对话
3. **变量支持** - {{code_diff}}, {{requirement}}, {{context}}等
4. **链式调用** - {{GENERATE_FROM:template_id}}模板嵌套
5. **标签系统** - 多标签分类和筛选
6. **公开/私有** - 模板共享权限控制
7. **使用统计** - 跟踪模板使用频率
8. **模板预览** - 独立预览界面

**用户标注**: [P1 ] 请在此标注优先级

## 📋 需求管理模块

### 功能清单
1. **需求文档管理** - 创建、编辑、删除需求文档
2. **多种输入方式**:
   - 文件上传 (支持.md、.txt、.docx等格式)
   - 手动创建 (直接输入需求内容)
3. **AI需求解析** - 自动分析和优化需求文档
4. **Markdown编辑器** - 实时预览的需求编辑器
5. **版本对比** - 原始需求 vs 优化需求对比查看
6. **状态跟踪** - 需求处理状态实时更新
7. **标签分类** - 需求分类和标签管理

### 核心功能
- **智能解析**: AI自动提取功能点和非功能需求
- **需求优化**: 基于最佳实践优化需求描述
- **冲突检测**: 识别需求间的潜在冲突
- **完整性检查**: 检查需求的完整性和一致性

**用户标注**: [ P1] 请在此标注优先级

## 📊 仪表盘模块

### 功能清单
1. **统计概览** - 任务总数、完成率、失败率等
2. **图表展示**:
   - 任务趋势图 (最近7天)
   - 任务状态分布饼图
   - AI模型使用统计
3. **最近任务** - 显示最近10个任务
4. **快捷操作** - 常用功能快速入口
5. **Token使用统计** - AI模型Token消耗统计

**用户标注**: [P3 ] 请在此标注优先级

## 🔧 Git配置模块

### 功能清单
1. **Git凭证管理** - 创建、编辑、删除Git凭证
2. **仓库配置** - 添加和管理代码仓库
3. **连接测试** - 验证Git连接和权限
4. **分支管理** - 获取和管理仓库分支
5. **默认分支设置** - 设置仓库默认基准分支

**用户标注**: [ P1] 请在此标注优先级

## 📚 知识库模块

### 功能清单
1. **知识库管理** - 创建、编辑、删除知识库
2. **文档上传** - 支持.pdf、.txt、.md、.docx等格式
3. **向量化处理** - 文档自动向量化和索引
4. **知识检索** - 基于语义的知识检索 (RAG)
5. **权限管理** - 知识库访问权限控制
6. **文档管理** - 文档的增删改查操作

**用户标注**: [ P3] 请在此标注优先级

## 🔄 任务管理模块

### 功能清单
1. **代码Diff任务**:
   - 分支对比 / 提交对比
   - 语法高亮的差异展示
   - 文件过滤和差异统计
2. **需求解析任务**:
   - 文件上传解析
   - 手动输入解析
   - 结构化需求提取
3. **流水线任务**:
   - 代码评审流水线
   - 测试用例生成流水线
   - 任务编排和监控

### 任务状态
- pending (待执行)
- queued (排队中)  
- running (执行中)
- completed (已完成)
- failed (失败)

**用户标注**: [P2 ] 请在此标注优先级

## 🔍 代码评审模块

### 功能清单
1. **智能评审** - AI自动识别代码问题和安全漏洞
2. **评审报告** - 生成详细的代码评审报告
3. **问题分级** - 按严重程度对问题进行分级
4. **修改建议** - 提供具体的代码修改建议
5. **评审模板** - 支持自定义评审标准
6. **批量评审** - 支持批量代码评审任务

**用户标注**: [ P1] 请在此标注优先级

## 🧪 测试用例生成模块

### 功能清单
1. **用例生成** - 基于需求自动生成测试用例
2. **覆盖分析** - 分析测试覆盖率和盲点
3. **用例优化** - 优化测试用例的有效性
4. **格式导出** - 支持多种格式的用例导出
5. **用例管理** - 测试用例的组织和管理
6. **用例模板** - 支持自定义测试用例模板

**用户标注**: [ P1] 请在此标注优先级

## 🔧 系统配置

### 基础配置
1. **API基础路径**: `/api/v1`
2. **认证方式**: JWT Bearer Token
3. **响应格式**: 统一JSON格式
4. **错误处理**: 统一错误码和消息
5. **日志记录**: 操作日志和错误日志

### 性能要求
1. **页面加载**: 首屏加载时间 < 2秒
2. **API响应**: 普通API响应时间 < 500ms
3. **AI处理**: AI任务响应时间 < 30秒
4. **并发支持**: 支持100+用户同时在线

**用户标注**: [ 基础配置P0，性能P5] 请确认以上配置要求

## 📋 实施计划建议

### 第一阶段 (核心功能)
- 用户认证和管理
- AI模型配置
- 基础的需求管理
- 简单的AI对话功能

### 第二阶段 (扩展功能)  
- Prompt模板管理
- 代码Diff和评审
- 仪表盘统计
- Git集成

### 第三阶段 (高级功能)
- 知识库和RAG
- 测试用例生成
- 流水线编排
- 高级AI功能

**用户标注**: [ ] 请确认实施计划或提出修改建议

---

## 📝 用户标注说明

请在每个模块的"用户标注"处填写优先级：
- ✅ **必须实现** - 核心功能，必须在第一阶段完成
- 🟡 **重要功能** - 重要功能，第二阶段实现  
- 🟠 **可选功能** - 可选功能，第三阶段或后续版本实现
- ❌ **暂不实现** - 当前版本不实现

**其他需求或修改建议**:
```
请在此处添加任何额外的需求、修改建议或特殊要求：

1. 
2. 
3. 

```

